+function(t){"use strict";function o(){var o=arguments,e=t(this).data("grid.dropdown");if(o[0]=o[0]||{},"object"==typeof o[0]){var s=o[0],n=t.extend({},i.DEFAULTS,s),d=t(n.menu||this);return d.each(function(){t(this).data("grid.dropdown",e=new i(this,n))})}"string"==typeof o[0]&&("undefined"!=typeof o[1]?e&&e[o[0]](o[1]):e&&e[o[0]]())}var i=function(o,i){this.$nav=t(o),this.options=i,this.$menu=this.$nav.children("ul"),this.$items=this.$menu.children("li"),this.$dropdown=[],this.$subdrop=[],this.hideTimeout=null,this._init()};i.VERSION="2.0.0",i.DEFAULTS={animation:"slide",speed:500,position:"bottom",alignement:"center"},i.prototype._init=function(){var o=this;this.$items.each(function(i){var e=t(this);o.$dropdown[i]=e.children("ul").hide(0).clone().appendTo(document.body).addClass("dropdown level-0 position-"+o.options.position+" align-"+o.options.alignement).hide(0),t(window).on("scroll.grid.dropdown."+i,function(){o.$dropdown[i].css({position:"absolute"}).offset(o._calculateOffset(i))}),e.on("mouseenter.grid.dropdown",function(){o.$dropdown[i].css({position:"absolute"}).offset(o._calculateOffset(i)),o.show(o.$dropdown[i]),t(window).trigger("scroll.grid.dropdown."+i)}),e.on("mouseleave.grid.dropdown",function(){o.hideTimeout=setTimeout(function(){o.hide(o.$dropdown[i]),t(o.$subdrop[i]).each(function(t){o.hide(o.$subdrop[i][t])})},250)}),o.$dropdown[i].on("mouseenter.grid.dropdown",function(){clearTimeout(o.hideTimeout),o.show(o.$dropdown[i])}),o.$dropdown[i].on("mouseleave.grid.dropdown",function(){o.hideTimeout=setTimeout(function(){o.hide(o.$dropdown[i]),t(o.$subdrop[i]).each(function(t){o.hide(o.$subdrop[i][t])})},250)}),o.$dropdown[i].children("li").each(function(e){var s=t(this);o.$subdrop[i]||(o.$subdrop[i]=[]),o.$subdrop[i][e]=s.children("ul").hide(0).clone().appendTo(document.body).addClass("dropdown level-1").hide(0),t(window).on("scroll.grid.dropdown."+i+"."+e,function(){o.$subdrop[i][e].css({position:"absolute"}).offset(o._calculateSubOffset(i,e))}),s.on("mouseenter.grid.dropdown",function(){o.$subdrop[i][e].css({position:"absolute"}).offset(o._calculateSubOffset(i,e)),t(o.$subdrop[i]).each(function(){o.hide(t(this))}),o.show(o.$subdrop[i][e]),t(window).trigger("scroll.grid.dropdown."+i+"."+e)}),o.$subdrop[i][e].on("mouseenter.grid.dropdown",function(){o.$dropdown[i].trigger("mouseenter.grid.dropdown"),s.trigger("mouseenter.grid.dropdown"),clearTimeout(o.hideTimeout),o.show(o.$subdrop[i][e])}),o.$subdrop[i][e].on("mouseleave.grid.dropdown",function(){o.hideTimeout=setTimeout(function(){o.hide(o.$dropdown[i]),o.hide(o.$subdrop[i][e])},250)})})})},i.prototype._calculateOffset=function(t){var o=0,i=0;if(o=this.$items.eq(t).offset().top,"bottom"==this.options.position){if(o+=this.$menu.outerHeight()+parseInt(this.$dropdown[t].css("margin-top")),"left"==this.options.alignement&&(i=this.$items.eq(t).offset().left),"center"==this.options.alignement){var e=this.$dropdown[t].outerWidth(),s=this.$items.eq(t).outerWidth(),n=(s-e)/2;i=this.$items.eq(t).offset().left+n}if("right"==this.options.alignement){var e=this.$dropdown[t].outerWidth(),s=this.$items.eq(t).outerWidth(),n=s-e;i=this.$items.eq(t).offset().left+n}}if("left"==this.options.position){if(i=this.$items.eq(t).offset().left-parseInt(this.$dropdown[t].css("margin-right"))-this.$dropdown[t].outerWidth(),o=this.$items.eq(t).offset().top,"top"==this.options.alignement&&(o+=parseInt(this.$dropdown[t].css("margin-top"))),"center"==this.options.alignement){var d=this.$dropdown[t].outerHeight(),r=this.$items.eq(t).outerHeight(),n=(r-d)/2;o+=n}if("bottom"==this.options.alignement){var d=this.$dropdown[t].outerHeight(),r=this.$items.eq(t).outerHeight(),n=r-d;o+=n}}if("top"==this.options.position){if(o-=this.$menu.outerHeight()+parseInt(this.$dropdown[t].css("margin-bottom")),"left"==this.options.alignement&&(i=this.$items.eq(t).offset().left),"center"==this.options.alignement){var e=this.$dropdown[t].outerWidth(),s=this.$items.eq(t).outerWidth(),n=(s-e)/2;i=this.$items.eq(t).offset().left+n}if("right"==this.options.alignement){var e=this.$dropdown[t].outerWidth(),s=this.$items.eq(t).outerWidth(),n=s-e;i=this.$items.eq(t).offset().left+n}}if("right"==this.options.position){if(i=this.$items.eq(t).offset().left+this.$items.eq(t).outerWidth()+parseInt(this.$dropdown[t].css("margin-left")),o=this.$items.eq(t).offset().top,"top"==this.options.alignement&&(o+=parseInt(this.$dropdown[t].css("margin-top"))),"center"==this.options.alignement){var d=this.$dropdown[t].outerHeight(),r=this.$items.eq(t).outerHeight(),n=(r-d)/2;o+=n}if("bottom"==this.options.alignement){var d=this.$dropdown[t].outerHeight(),r=this.$items.eq(t).outerHeight(),n=r-d;o+=n}}return{top:o,left:i}},i.prototype._calculateSubOffset=function(o,i){var e=0,s=0,n=this.$dropdown[o].outerWidth(),d=this.$subdrop[o][i].outerWidth(),r=this.$dropdown[o].offset().left+n+d<t(window).width();return e=this.$dropdown[o].children("li").eq(i).offset().top+parseInt(this.$subdrop[o][i].css("margin-top")),s=r?this.$dropdown[o].offset().left+n+parseInt(this.$subdrop[o][i].css("margin-left")):this.$dropdown[o].offset().left-d-parseInt(this.$subdrop[o][i].css("margin-right")),{top:e,left:s}},i.prototype.show=function(o){switch(t(o).stop(),this.options.animation){case"fade":t(o).fadeIn(this.options.speed);break;case"slide":t(o).slideDown(this.options.speed);break;case"none":default:t(o).show(0)}},i.prototype.hide=function(o){switch(this.options.animation){case"fade":t(o).fadeOut(this.options.speed);break;case"slide":t(o).slideUp(this.options.speed);break;case"none":default:t(o).hide(0)}};var e=t.grid.dropdown||t.fn.dropdown;t.grid.dropdown=o,t.grid.dropdown.Constructor=i,t.fn.dropdown=o,t.fn.dropdown.Constructor=i,t.grid.dropdown.noConflict=function(){return t.grid.dropdown=e,this}}(jQuery);